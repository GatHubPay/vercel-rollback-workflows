# üéÆ Template CaixaBox - Deploy com Rollback Autom√°tico
# 
# Otimizado para plataformas de jogos e caixas online
# Configura√ß√µes robustas para sistemas de entretenimento

name: Deploy CaixaBox

on:
  push:
    branches: [main, master]
  workflow_dispatch:

jobs:
  deploy:
    uses: GatHubPay/vercel-rollback-workflows/.github/workflows/vercel-rollback.yml@main
    with:
      # ‚¨áÔ∏è OBRIGAT√ìRIO: Nome do seu projeto no Vercel
      vercelProject: "rasparei"
      
      # ‚¨áÔ∏è ROTAS CR√çTICAS PARA PLATAFORMA DE JOGOS
      routes: "/,/login,/jogos,/caixas,/carteira,/perfil,/historico,/api/health,/api/jogos,/api/caixas,/api/auth,/api/carteira"
      
      # ‚¨áÔ∏è CONFIGURA√á√ïES ROBUSTAS PARA PLATAFORMA DE JOGOS
      healthCheckTimeout: 45        # Timeout adequado para jogos
      maxRetries: 4                 # Tentativas equilibradas
      enablePostDeployMonitoring: true
      monitoringDurationMinutes: 45 # Monitoramento de 45 min
      monitoringIntervalMinutes: 5  # Verifica√ß√µes a cada 5 min
      
    secrets:
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
      TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}

# ========================================
# ROTAS IMPORTANTES PARA CAIXABOX
# ========================================
#
# P√°ginas Cr√≠ticas:
# / - Landing page principal
# /login - Autentica√ß√£o de usu√°rios
# /jogos - Cat√°logo de jogos dispon√≠veis
# /caixas - Sistema de caixas misteriosas
# /carteira - Gest√£o financeira do usu√°rio
# /perfil - Perfil e configura√ß√µes do usu√°rio
# /historico - Hist√≥rico de jogos e transa√ß√µes
# /ranking - Ranking de jogadores
# /promocoes - Promo√ß√µes e ofertas
#
# APIs Cr√≠ticas:
# /api/health - Health check do sistema
# /api/jogos - Listagem e dados dos jogos
# /api/caixas - Sistema de caixas misteriosas
# /api/auth - Autentica√ß√£o e autoriza√ß√£o
# /api/carteira - Transa√ß√µes financeiras
# /api/usuarios - Gest√£o de usu√°rios
# /api/ranking - Sistema de pontua√ß√£o
# /api/pagamentos - Processamento de pagamentos
#
# ========================================
# CONFIGURA√á√ïES ESPEC√çFICAS PARA JOGOS
# ========================================
#
# - Timeout de 45s para jogos (equilibrado)
# - 4 tentativas para garantir disponibilidade
# - Monitoramento de 45min para detectar problemas
# - Verifica√ß√µes a cada 5min para resposta r√°pida
# - Foco em rotas de jogos e caixas
# - Sistema de carteira e transa√ß√µes
#
# ========================================

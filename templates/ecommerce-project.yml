# üõí Template E-commerce - Deploy com Rollback Autom√°tico
# 
# Otimizado para lojas online e e-commerce
# Testa rotas cr√≠ticas como carrinho, checkout e produtos

name: Deploy E-commerce com Rollback

on:
  push:
    branches: [main, master]
  workflow_dispatch:

jobs:
  deploy:
    uses: SeuUsuario/vercel-rollback-workflows/.github/workflows/vercel-rollback.yml@v1
    with:
      # ‚¨áÔ∏è OBRIGAT√ìRIO: Nome do seu projeto no Vercel
      vercelProject: "minha-loja-vercel"
      
      # ‚¨áÔ∏è ROTAS CR√çTICAS PARA E-COMMERCE
      routes: "/,/produtos,/carrinho,/checkout,/api/produtos,/api/pagamento"
      
      # ‚¨áÔ∏è CONFIGURA√á√ïES OTIMIZADAS PARA E-COMMERCE
      healthCheckTimeout: 45        # Timeout maior para APIs de pagamento
      maxRetries: 4                 # Mais tentativas para transa√ß√µes
      monitoringDurationMinutes: 45 # Monitoramento estendido
      
    secrets:
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      VERCEL_TEAM_ID: ${{ secrets.VERCEL_TEAM_ID }}
      VERCEL_SCOPE: ${{ secrets.VERCEL_SCOPE }}

# ========================================
# ROTAS IMPORTANTES PARA E-COMMERCE
# ========================================
#
# P√°ginas Principais:
# / - Homepage
# /produtos - Cat√°logo
# /carrinho - Carrinho de compras  
# /checkout - Finaliza√ß√£o
# /conta - √Årea do cliente
#
# APIs Cr√≠ticas:
# /api/produtos - Listagem de produtos
# /api/carrinho - Opera√ß√µes do carrinho
# /api/pagamento - Processamento de pagamento
# /api/auth - Autentica√ß√£o
#
# ========================================

# üé∞ Template Casa de Apostas - Deploy com Rollback Autom√°tico
# 
# Otimizado para plataformas de apostas e jogos
# Configura√ß√µes robustas para sistemas cr√≠ticos

name: Deploy Casa de Apostas

on:
  push:
    branches: [main, master]
  workflow_dispatch:

jobs:
  deploy:
    uses: SeuUsuario/vercel-rollback-workflows/.github/workflows/vercel-rollback.yml@v1.0.0
    with:
      # ‚¨áÔ∏è OBRIGAT√ìRIO: Nome do seu projeto no Vercel
      vercelProject: "casa-apostas-producao"
      
      # ‚¨áÔ∏è ROTAS CR√çTICAS PARA CASA DE APOSTAS
      routes: "/,/login,/apostas,/carteira,/jogos,/odds,/api/odds,/api/apostas,/api/carteira,/api/health"
      
      # ‚¨áÔ∏è CONFIGURA√á√ïES ROBUSTAS PARA SISTEMA CR√çTICO
      healthCheckTimeout: 60        # Timeout maior para APIs complexas
      maxRetries: 5                 # Mais tentativas para sistema cr√≠tico
      enablePostDeployMonitoring: true
      monitoringDurationMinutes: 60 # Monitoramento estendido (1 hora)
      monitoringIntervalMinutes: 3  # Verifica√ß√µes mais frequentes
      
    secrets:
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      VERCEL_TEAM_ID: ${{ secrets.VERCEL_TEAM_ID }}
      VERCEL_SCOPE: ${{ secrets.VERCEL_SCOPE }}

# ========================================
# ROTAS IMPORTANTES PARA CASA DE APOSTAS
# ========================================
#
# P√°ginas Cr√≠ticas:
# / - Landing page
# /login - Autentica√ß√£o de usu√°rios
# /apostas - Interface de apostas
# /carteira - Gest√£o financeira
# /jogos - Cat√°logo de jogos
# /odds - Cota√ß√µes em tempo real
# /historico - Hist√≥rico de apostas
#
# APIs Cr√≠ticas:
# /api/odds - Cota√ß√µes (MUITO CR√çTICO)
# /api/apostas - Processamento de apostas
# /api/carteira - Transa√ß√µes financeiras
# /api/auth - Autentica√ß√£o
# /api/health - Health check
# /api/payments - Sistema de pagamentos
#
# ========================================
# CONFIGURA√á√ïES ESPEC√çFICAS
# ========================================
#
# - Timeout alto (60s) devido √† complexidade das APIs
# - Muitas tentativas (5) para garantir disponibilidade
# - Monitoramento longo (60min) para detectar problemas
# - Verifica√ß√µes frequentes (3min) para resposta r√°pida
#
# ========================================
